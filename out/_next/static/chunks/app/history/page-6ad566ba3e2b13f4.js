(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{9391:()=>{},5658:()=>{},9330:(e,t,r)=>{Promise.resolve().then(r.bind(r,7887))},7887:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(4650),s=r(3064),o=r(2195),c=r(5907),n=r(4702),l=r(7711),i=r(983),d=r(7953);function x(){let e=(0,o.useRouter)(),{userData:t,loading:r}=(0,n.a)();(0,s.useEffect)(()=>{if(!t&&!r)return e.push("/login")},[t,r]);let[x,u]=(0,s.useState)("mexc"),{status:h,history:m,loading:p,fetchTrades:f,fetchStatus:g,fetchPrices:y}=(0,i.N)();return r?(0,a.jsx)(l.Z,{}):(0,a.jsx)("div",{className:"flex py-2 justify-center items-center min-h-screen bg-background-dark text-white/65",children:(0,a.jsxs)("div",{className:"w-[98%] flex flex-col p-4 rounded-md bg-background theme-border",children:[(0,a.jsx)(c.Z,{}),(0,a.jsx)("div",{className:"overflow-y-auto max-h-[600px] rounded-md theme-border",children:(0,a.jsxs)("table",{className:"w-full text-sm min-w-[960px]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-background-light text-left overflow-y-auto grid grid-cols-[75px_1.5fr_0.5fr_0.5fr_0.5fr_0.5fr] uppercase font-bold",children:[(0,a.jsx)("th",{className:"py-2 px-4 flex items-center",children:"Pair"}),(0,a.jsx)("th",{className:"py-2 px-4 font-semibold text-center text-nowrap",children:"Date"}),(0,a.jsx)("th",{className:"py-2 px-4 font-semibold text-center text-nowrap",children:"Side"}),(0,a.jsx)("th",{className:"py-2 px-4 font-semibold text-center text-nowrap",children:"Price"}),(0,a.jsx)("th",{className:"py-2 px-4 font-semibold text-center text-nowrap",children:"Amount"}),(0,a.jsx)("th",{className:"py-2 px-4 font-semibold text-center text-nowrap",children:"Amount"})]})}),(0,a.jsx)("tbody",{children:m.flat().map((e,t)=>(0,a.jsxs)("tr",{className:(0,d.cn)("bg-background overflow-y-auto grid grid-cols-[75px_1.5fr_0.5fr_0.5fr_0.5fr_0.5fr] items-center transition-all overflow-visible"),children:[(0,a.jsx)("td",{className:"py-2 px-4 text-center",children:e.symbol}),(0,a.jsx)("td",{className:"py-2 px-4 text-center",children:new Date(1*e.time+new Date().getTimezoneOffset()).toString()}),(0,a.jsx)("td",{className:"py-2 px-4 text-green text-center ".concat(e.isBuyer?"text-foreground":"text-red-500"),children:e.isBuyer?"Buy":"Sell"}),(0,a.jsx)("td",{className:"py-2 px-4 text-center",children:e.price}),(0,a.jsxs)("td",{className:"py-2 px-4 text-center",children:[e.qty," ",e.symbol.replaceAll(e.commissionAsset,"")]}),(0,a.jsxs)("td",{className:"py-2 px-4 text-center",children:[e.quoteQty," ",e.commissionAsset]})]},"history-"+t))})]})})]})})}},5907:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r(4650),s=r(4702),o=r(983),c=r(2195),n=r(2597);function l(){let{logout:e}=(0,s.a)(),t=(0,c.useRouter)(),{status:r,loading:l,fetchTrades:i,fetchStatus:d,fetchPrices:x}=(0,o.N)();return(0,a.jsxs)("div",{className:"flex justify-between items-center rounded-t-md pb-4",children:[(0,a.jsxs)("h1",{className:"text-lg font-semibold text-white uppercase",children:["Crypto ",(0,a.jsx)("span",{className:"text-foreground",children:"Trading"})," Bot"]}),(0,a.jsxs)("div",{className:"flex items-center rounded-t-md",children:[(0,a.jsxs)("button",{onClick:()=>{i(),d(),x()},className:"bg-background-light text-white px-4 py-2 text-sm rounded-md font-semibold flex gap-1 items-center uppercase mr-2",disabled:l,children:[(0,a.jsx)(n.Fer,{className:"text-foreground text-lg"}),"Refresh"]}),(0,a.jsx)("button",{className:"bg-background-light text-white px-4 py-2 text-sm rounded-md font-semibold flex gap-1 items-center uppercase mr-2",onClick:()=>{t.push("/")},children:"Dashboard"}),(0,a.jsx)("button",{className:"bg-background-light text-white px-4 py-2 text-sm rounded-md font-semibold flex gap-1 items-center uppercase mr-2",onClick:()=>{t.push("/history")},children:"History"}),(0,a.jsx)("button",{className:"bg-background-light text-white px-4 py-2 text-sm rounded-md font-semibold flex gap-1 items-center uppercase",onClick:e,children:"Sign Out"})]})]})}},7711:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(4650),s=r(2008);function o(){return(0,a.jsx)("div",{className:"h-screen w-screen flex justify-center items-center bg-background",children:(0,a.jsx)(s.xz6,{className:"text-5xl animate-spin text-white"})})}},4702:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>i,a:()=>d});var a=r(4650),s=r(7711),o=r(1441),c=r(3064);let n=(0,c.createContext)(),l="https://proxy-api-8pes.onrender.com",i=e=>{let{children:t}=e,[r,i]=(0,c.useState)(null),[d,x]=(0,c.useState)(!0),u=()=>{let e=localStorage.getItem("token");e&&(console.log("debug setting header",e),o.Z.defaults.headers.common.Authorization="Bearer ".concat(e))};(0,c.useEffect)(()=>{let e=localStorage.getItem("token");e?o.Z.get("".concat(l,"/api/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{i(e.data),u(),x(!1)}).catch(()=>{localStorage.removeItem("token")}):x(!1)},[]);let h=async(e,t)=>{try{let{data:r}=await o.Z.post("".concat(l,"/api/auth/login"),{email:e,password:t});return localStorage.setItem("token",r.token),i(r.user),u(),r}catch(e){throw Error(e.response.data.message)}},m=async(e,t,r)=>{try{let{data:a}=await o.Z.post("".concat(l,"/api/auth/signup"),{email:e,password:t,confirmPassword:r});return localStorage.setItem("token",a.token),i(a.user),u(),a}catch(e){throw Error(e.response.data.message)}};return d?(0,a.jsx)(s.Z,{}):(0,a.jsx)(n.Provider,{value:{userData:r,login:h,signup:m,logout:()=>{localStorage.removeItem("token"),i(null),u()},loading:d},children:t})},d=()=>(0,c.useContext)(n)},983:(e,t,r)=>{"use strict";r.d(t,{BotProvider:()=>i,N:()=>d});var a=r(4650),s=r(3064),o=r(1441),c=r(9261);r.n(c)().config();let n="https://proxy-api-8pes.onrender.com",l=(0,s.createContext)(),i=e=>{let{children:t}=e,[r,c]=(0,s.useState)([]),[i,d]=(0,s.useState)({}),[x,u]=(0,s.useState)([]),[h,m]=(0,s.useState)([]),[p,f]=(0,s.useState)([]),[g,y]=(0,s.useState)([]),[b,j]=(0,s.useState)(!1),w=async()=>{j(!0);try{let e=await o.Z.get("".concat(n,"/api/status"));e.data?d(e.data):console.error("Failed to fetch Bot Status:",e.data)}catch(e){console.error("Error fetching Bot Status:",e)}finally{j(!1)}},N=async()=>{j(!0);try{let e=await o.Z.get("".concat(n,"/api/symbols"));e.data?c(e.data):console.error("Failed to fetch Symbols:",e.data)}catch(e){console.error("Error fetching Symbols:",e)}finally{j(!1)}},v=async()=>{j(!0);try{let e=await o.Z.get("".concat(n,"/api/balance"));e.data?u(e.data):console.error("Failed to fetch Balances:",e.data)}catch(e){console.error("Error fetching Balances:",e)}finally{j(!1)}},k=async()=>{j(!0);try{let e=await o.Z.get("".concat(n,"/api/history"));e.data?f(e.data):console.error("Failed to fetch History:",e.data)}catch(e){console.error("Error fetching History:",e)}finally{j(!1)}},S=async()=>{j(!0);try{let e=await o.Z.get("".concat(n,"/api/trades"));e.data?y(e.data):console.error("Failed to fetch Trades:",e.data)}catch(e){console.error("Error fetching Trades:",e)}finally{j(!1)}},Z=async()=>{j(!0);try{let e=await fetch("https://api.binance.com/api/v3/ticker/price"),t=await e.json();t?m(t):console.error("Failed to fetch Prices:",t)}catch(e){console.error("Error fetching Prices:",e)}finally{j(!1)}},E=async e=>{console.log("log->start params",e);let t=await o.Z.post("".concat(n,"/api/start"),e);return console.log("log->start res",t),w(),t.data},_=async()=>{let e=await o.Z.get("".concat(n,"/api/stop"));return w(),e.data},B=async e=>{console.log("log->restart params",e);try{let t=await o.Z.post("".concat(n,"/api/restart"),e);console.log("log->restart res",t),t.data.success||console.error("Failed to restart Bot:",t.data)}catch(e){console.error("Error restart Bot:",e)}finally{w()}};return(0,s.useEffect)(()=>{console.log("log->useEffect"),setInterval(()=>{w(),v()},6e4),N(),w(),v(),k(),Z(),S()},[]),(0,a.jsx)(l.Provider,{value:{status:i,loading:b,symbols:r,balances:x,history:p,trades:g,prices:h,startBot:E,stopBot:_,restartBot:B,fetchHistory:k,fetchTrades:S,fetchBalances:v,fetchPrices:Z,fetchStatus:w},children:t})},d=()=>(0,s.useContext)(l)},7953:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(1296),s=r(342);r(9012),r(5210);var o=r(9261),c=r.n(o);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.Z)(t))}r(742),r(4280).Buffer,c().config()}},e=>{var t=t=>e(e.s=t);e.O(0,[399,442,657,919,222,403,209,947,170,744],()=>t(9330)),_N_E=e.O()}]);