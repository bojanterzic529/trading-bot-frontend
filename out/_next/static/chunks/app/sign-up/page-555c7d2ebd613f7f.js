(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914,626,363],{9358:(e,t,s)=>{Promise.resolve().then(s.bind(s,7950))},7950:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(4650),r=s(2531),o=s(2195),n=s(3064),l=s(4702),c=s(693);function i(e){let{isLogin:t,isReset:s}=e,i=(0,o.useRouter)(),{login:u,signup:d,resetPassword:m,userData:g}=(0,l.a)();(0,n.useEffect)(()=>{g&&!s&&i.push("/")},[g,i]);let[h,x]=(0,n.useState)(""),[f,p]=(0,n.useState)({email:"",password:"",confirmPassword:""}),w=e=>{p({...f,[e.target.name]:e.target.value})},b=async e=>{e.preventDefault();try{if(t)await u(f.email,f.password);else if(s){let e=await m(f.email,f.password,f.confirmPassword);x(""),c.Am.success(e.message)}else{let e=await d(f.email,f.password,f.confirmPassword);console.log("response",e),x(""),c.Am.success(e.message)}}catch(e){x(e.message),c.Am.error(e.message)}};return(0,a.jsxs)("div",{className:"flex flex-col items-center bg-background-dark p-8 rounded-lg shadow-lg w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-6",children:t?"Login":s?"Reset Password":"Sign Up"}),h&&(0,a.jsx)("p",{className:"text-red-500 mb-4",children:h}),(0,a.jsxs)("form",{className:"w-full",onSubmit:b,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-white mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",name:"email",value:f.email,onChange:w,className:"w-full p-3 rounded bg-background-light text-white outline-none focus:ring-2 focus:ring-foreground",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-white mb-2",children:"Password"}),(0,a.jsx)("input",{type:"password",name:"password",value:f.password,onChange:w,className:"w-full p-3 rounded bg-background-light text-white outline-none focus:ring-2 focus:ring-foreground",required:!0})]}),!t&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-white mb-2",children:"Confirm Password"}),(0,a.jsx)("input",{type:"password",name:"confirmPassword",value:f.confirmPassword,onChange:w,className:"w-full p-3 rounded bg-background-light text-white outline-none focus:ring-2 focus:ring-foreground",required:!0})]}),(0,a.jsx)("button",{type:"submit",className:"w-full py-3 mt-4 bg-foreground rounded text-background-dark font-semibold hover:bg-foreground/90 transition",children:t?"Log In":s?"Reset Password":"Sign Up"})]}),t&&(0,a.jsxs)("p",{className:"text-sm text-gray-400 mt-6",children:["Don't have an account?",(0,a.jsx)(r.default,{href:"/sign-up",className:"text-foreground hover:underline ml-1",children:"Sign Up"})]}),!t&&(0,a.jsxs)("p",{className:"text-sm text-gray-400 mt-6",children:["Already have an account?",(0,a.jsx)(r.default,{href:"/login",className:"text-foreground hover:underline ml-1",children:"Log In"})]}),!t&&s&&(0,a.jsxs)("p",{className:"text-sm text-gray-400 mt-6",children:["Don't have an account?",(0,a.jsx)(r.default,{href:"/sign-up",className:"text-foreground hover:underline ml-1",children:"Sign Up"})]}),!s&&(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-6",children:(0,a.jsx)(r.default,{href:"/reset-password",className:"text-foreground hover:underline ml-1",children:"Forgot Password?"})})]})}},7711:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=s(4650),r=s(2008);function o(){return(0,a.jsx)("div",{className:"h-screen w-screen flex justify-center items-center bg-background",children:(0,a.jsx)(r.xz6,{className:"text-5xl animate-spin text-white"})})}},4702:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>i,a:()=>u});var a=s(4650),r=s(7711),o=s(1441),n=s(3064);let l=(0,n.createContext)(),c="https://proxy-api-8pes.onrender.com",i=e=>{let{children:t}=e,[s,i]=(0,n.useState)(null),[u,d]=(0,n.useState)(!0),m=()=>{let e=localStorage.getItem("token");e&&(o.Z.defaults.headers.common.Authorization="Bearer ".concat(e))};(0,n.useEffect)(()=>{let e=localStorage.getItem("token");e?o.Z.get("".concat(c,"/api/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{i(e.data),m(),d(!1)}).catch(()=>{localStorage.removeItem("token")}):d(!1)},[]);let g=async(e,t)=>{try{let{data:s}=await o.Z.post("".concat(c,"/api/auth/login"),{email:e,password:t});return localStorage.setItem("token",s.token),i(s.user),m(),s}catch(e){throw Error(e.response.data.message)}},h=async(e,t,s)=>{try{let{data:a}=await o.Z.post("".concat(c,"/api/auth/signup"),{email:e,password:t,confirmPassword:s});return a}catch(e){throw Error(e.response.data.message)}},x=async(e,t,s)=>{try{let{data:a}=await o.Z.post("".concat(c,"/api/auth/reset"),{email:e,password:t,confirmPassword:s});return localStorage.setItem("token",a.token),i(a.user),m(),a}catch(e){throw Error(e.response.data.message)}};return u?(0,a.jsx)(r.Z,{}):(0,a.jsx)(l.Provider,{value:{userData:s,login:g,signup:h,resetPassword:x,logout:()=>{localStorage.removeItem("token"),i(null),m()},loading:u},children:t})},u=()=>(0,n.useContext)(l)}},e=>{var t=t=>e(e.s=t);e.O(0,[399,222,693,233,947,170,744],()=>t(9358)),_N_E=e.O()}]);